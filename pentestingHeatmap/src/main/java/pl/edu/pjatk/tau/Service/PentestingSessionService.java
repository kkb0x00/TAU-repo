package pl.edu.pjatk.tau.Service;

import pl.edu.pjatk.tau.Domain.PentestingSession;
import pl.edu.pjatk.tau.Exceptions.InvalidIdException;

import java.util.*;

public class PentestingSessionService implements ISessionService<PentestingSession> {
    private HashMap<Integer, PentestingSession> sessions;

    public PentestingSessionService(HashMap<Integer, PentestingSession> sessionsMap) {
        sessions = sessionsMap;
    }


    public HashMap<Integer, PentestingSession> getDatabaseHandler() {
        return sessions;
    }

    public PentestingSession get(int id) {
        return sessions.get(id);
    }

    public List<PentestingSession> getAll() {
        List<PentestingSession> pentestingSessionsList = new ArrayList<PentestingSession>();

        for(Map.Entry<Integer, PentestingSession> entry: sessions.entrySet()) {
            pentestingSessionsList.add(entry.getValue());
        }

        return pentestingSessionsList;
    }

    public void add(PentestingSession pentestingSession) {
    }

    public void update(int id, PentestingSession pentestingSession) throws InvalidIdException {
        PentestingSession sessionToUpdate = sessions.get(id);

        if(sessionToUpdate == null) {
            throw new InvalidIdException("Pentest o takim id nie istnieje. Nie moge updatowac");
        }

        sessions.put(id, pentestingSession);
    }

    public void delete(int id) {
        sessions.remove(id);
    }
}
