package pl.edu.pjatk.tau.Repository;

import pl.edu.pjatk.tau.Domain.PentestingSession;

import java.util.ArrayList;
import java.util.List;

public class PentestRepository implements IEntityRepository<PentestingSession> {
    private List<PentestingSession> sessions;
    private int index = 1;

    //constructor dla potrzeb testowych
    public PentestRepository(List<PentestingSession> initialData) {
        sessions = new ArrayList<>(initialData);
        index += initialData.size();
    }

    @Override
    public PentestingSession get(int id) {
        return sessions.stream()
                .filter(session -> session.getId() == id)
                .findAny()
                .orElse(null);
    }

    @Override
    public List<PentestingSession> getAll() {
        return sessions;
    }

    @Override
    public void add(PentestingSession session) {
        session.setId(index++);
        sessions.add(session);
    }

    @Override
    public void update(PentestingSession element) {
        for (PentestingSession session : sessions) {
            if (session.getId() == element.getId()) {

                session.setTitle(element.getTitle());
                session.setRiskType(element.getRiskType());
                session.setTime(element.getTime());
                session.setWeight(element.getWeight());

                break;
            }
        }

    }

    @Override
    public void delete(int id) {
        for (PentestingSession session: sessions) {
            if(session.getId() == id) {
                sessions.remove(session);
                break;
            }
        }
    }
}
