package pl.edu.pjatk.tau.Repository;

import pl.edu.pjatk.tau.Domain.PentestingSession;

import java.util.ArrayList;
import java.util.List;

public class PentestRepository implements IEntityRepository<PentestingSession> {
    private List<PentestingSession> sessions = new ArrayList<>();
    private int index = 1;

    public PentestRepository() { }

    public PentestRepository(List<PentestingSession> initialData) {
        sessions = initialData;
        index += initialData.size();
    }

    @Override
    public PentestingSession get(int id) {
        return sessions.stream()
                .filter(session -> session.getId() == id)
                .findAny()
                .orElse(null);
    }

    @Override
    public List<PentestingSession> getAll() {
        return sessions;
    }

    @Override
    public void add(PentestingSession session) {
        session.setId(index++);
        sessions.add(session);
    }

    @Override
    public void update(PentestingSession element) {
        for (PentestingSession session : sessions) {
            if (session.getId() == element.getId()) {

                session.setTitle(element.getTitle());
                session.setRiskType(element.getRiskType());
                session.setTimeInMinutes(element.getTimeInMinutes());
                session.setWeight(element.getWeight());

                break;
            }
        }

    }

    @Override
    public void delete(int id) {
        sessions.removeIf(session -> session.getId() == id);
    }
}
